import { useEffect, useState } from 'react'
import './App.css'
// import OkAdapter from './adapter/OkAdapter'
import {useOkApi} from "./hooks/useOkApi.ts";



function App() {

  const [textData, setTextData] = useState('')
  // const adapterRef = useRef<OkAdapter | null>(null)
  const {initAdapter, saveData, loadData, showAd, isReady} = useOkApi()

  useEffect(() => {
    const script = document.createElement('script')
    script.src = 'https://api.ok.ru/js/fapi5.js'
    script.defer = true
    document.head.appendChild(script)



    initAdapter()

    return () => {
      document.head.removeChild(script)
    }
  }, [])






  return (
      <div className="scroll-container">
        <div className="app-container">
          <header className="app-header">
            <h1>–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</h1>
            <div className="status-indicator">
              {isReady ? 'OK API Ready' : 'OK API Loading...'}
            </div>
          </header>

          <main className="dashboard">
            {/* –ë–ª–æ–∫ —Ä–µ–∫–ª–∞–º—ã */}
            <section className="control-card">
              <h2 className="section-title">
                <span className="icon">üì¢</span>
                ADV
              </h2>
              <div className="button-group">
                <button
                    onClick={() => showAd('interstitial')}
                    className="btn btn-primary"
                    disabled={!isReady}
                >
                  show Interstitial
                </button>
                <button
                    onClick={() => showAd('reward')}
                    className="btn btn-secondary"
                    disabled={!isReady}
                >
                  show Reward
                </button>
              </div>
            </section>

            {/* –ë–ª–æ–∫ –∏–≥—Ä–æ–∫–∞ */}
            <section className="control-card">
              <h2 className="section-title">
                <span className="icon">üéÆ</span>
                Player
              </h2>
              <div className="input-group">
              <textarea
                  value={textData}
                  onChange={(e) => setTextData(e.target.value)}
                  placeholder="–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è saveData..."
                  disabled={!isReady}
              />
                <div className="button-group">
                  <button
                      onClick={saveData}
                      className="btn btn-secondary"
                      disabled={!isReady}
                  >
                    saveData
                  </button>
                  <button
                      onClick={loadData}
                      className="btn btn-secondary"
                      disabled={!isReady}
                  >
                    getData
                  </button>
                  <button
                      // onClick={() => getPlayerInfo('id')}
                      className="btn btn-secondary"
                      disabled={!isReady}
                  >
                    getId
                  </button>
                  <button
                      className="btn btn-secondary"
                      disabled={!isReady}
                  >
                    getName
                  </button>
                  <button

                      className="btn btn-secondary"
                      disabled={!isReady}
                  >
                    isAuth
                  </button>
                  <button
                      className="btn btn-secondary"
                      disabled={!isReady}
                  >
                    getAvatar
                  </button>
                </div>
              </div>
            </section>

            {/* –ë–ª–æ–∫ –ø–ª–∞—Ç–µ–∂–µ–π */}
            <section className="control-card">
              <h2 className="section-title">
                <span className="icon">üí≥</span>
                Purchase
              </h2>
              <div className="button-group">
                <button
                    className="btn btn-primary"
                    disabled={!isReady}
                >
                  getPurchase
                </button>
                <button
                    className="btn btn-primary"
                    disabled={!isReady}
                >
                  getCatalog
                </button>
                <button
                    className="btn btn-primary"
                    disabled={!isReady}
                >
                  consumePurchase
                </button>
                <button
                    className="btn btn-primary"
                    disabled={!isReady}
                >
                  buy
                </button>
              </div>
            </section>

            {/* –ë–ª–æ–∫ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π */}
            <section className="control-card">
              <h2 className="section-title">
                <span className="icon">üë•</span>
                Social
              </h2>
              <div className="social-grid">
                {/* –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –≥—Ä—É–ø–ø—É */}
                <div className="social-card">
                  <h3 className="section-title">–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –≥—Ä—É–ø–ø—É</h3>
                  <div className="button-group">
                    <button
                        className="btn btn-secondary"
                        disabled={!isReady}
                    >
                      isAvailable
                    </button>
                    <button
                        className="btn btn-secondary"
                        disabled={!isReady}
                    >
                      act
                    </button>
                    <button
                        className="btn btn-secondary"
                        disabled={!isReady}
                    >
                      getStatus
                    </button>
                  </div>

                </div>

                <div className="social-card">
                  <h3 className="section-title">–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h3>
                  <div className="button-group">
                    <button id="notifications-isAvailable" className="btn btn-secondary">isAvailable</button>
                    <button id="notifications-act" className="btn btn-secondary">act</button>
                    <button id="notifications-getStatus" className="btn btn-secondary">getStatus</button>
                  </div>
                </div>

                <div className="social-card">
                  <h3 className="section-title">–ü–æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ü–µ–Ω–∫—É</h3>
                  <div className="button-group">
                    <button id="rateGame-isAvailable" className="btn btn-secondary">isAvailable</button>
                    <button id="rateGame-act" className="btn btn-secondary">act</button>
                    <button id="rateGame-getStatus" className="btn btn-secondary">getStatus</button>
                  </div>
                </div>

                <div className="social-card">
                  <h3 className="section-title">–†–∞–∑–º–µ—Å—Ç–∏—Ç—å –ø–æ—Å—Ç</h3>
                  <div className="button-group">
                    <button id="createPost-isAvailable" className="btn btn-secondary">isAvailable</button>
                    <button id="createPost-act" className="btn btn-secondary">act</button>
                    <button id="createPost-getStatus" className="btn btn-secondary">getStatus</button>
                  </div>
                </div>

                <div className="social-card">
                  <h3 className="section-title">–†–∞–∑–º–µ—Å—Ç–∏—Ç—å —Å—Ç–æ—Ä–∏—Å</h3>
                  <div className="button-group">
                    <button id="createStory-isAvailable" className="btn btn-secondary">isAvailable</button>
                    <button id="createStory-act" className="btn btn-secondary">act</button>
                    <button id="createStory-getStatus" className="btn btn-secondary">getStatus</button>
                  </div>
                </div>

                <div className="social-card">
                  <h3 className="section-title">–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–≥–∞</h3>
                  <div className="button-group">
                    <button id="inviteFriend-isAvailable" className="btn btn-secondary">isAvailable</button>
                    <button id="inviteFriend-act" className="btn btn-secondary">act</button>
                    <button id="inviteFriend-getStatus" className="btn btn-secondary">getStatus</button>
                  </div>
                </div>

                <div className="social-card">
                  <h3 className="section-title">–î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ</h3>
                  <div className="button-group">
                    <button id="addToFavorites-isAvailable" className="btn btn-secondary">isAvailable</button>
                    <button id="addToFavorites-act" className="btn btn-secondary">act</button>
                    <button id="addToFavorites-getStatus" className="btn btn-secondary">getStatus</button>
                  </div>
                </div>

                <div className="social-card">
                  <h3 className="section-title">–î–æ–±–∞–≤–∏—Ç—å –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω</h3>
                  <div className="button-group">
                    <button id="addToHomeScreen-isAvailable" className="btn btn-secondary">isAvailable</button>
                    <button id="addToHomeScreen-act" className="btn btn-secondary">act</button>
                    <button id="addToHomeScreen-getStatus" className="btn btn-secondary">getStatus</button>
                  </div>
                </div>
                {/* –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ */}
                {/* ... */}
              </div>
            </section>
          </main>
        </div>
      </div>
  )
}

export default App